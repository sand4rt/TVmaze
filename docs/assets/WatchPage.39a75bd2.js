import{f as h,u as k,Q as x,_ as w,d as u,o,c,a as r,b as W,t as m,e as g,p as I,g as B,F as S,r as L,h as d,i as _,S as R,j as N,m as v,k as y,w as z,H,L as U}from"./index.ee92d07c.js";const p=new URL("https://api.tvmaze.com/");function V(e){return h(`${p}search/shows?q=${e}`)}function P(e){return h(`${p}shows?page=${e}`)}function T(e,a){const t=new URL(`${p}shows/${e}`);if(!a)return h(t);const s=a.map(l=>["embed[]",l]),n=new URLSearchParams(s);return h(`${t}?${n}`)}const j=Object.freeze({baseUrl:p,searchByShowName:V,getShowsByPage:P,getShowById:T});function q(e){function a(s){var l,i,f;const n=(l=s._embedded)==null?void 0:l.images.find(b=>b.type==="background");return{id:s.id.toString(),name:s.name,headerImage:(n==null?void 0:n.resolutions.original.url)||((i=s.image)==null?void 0:i.medium),rating:(f=s.rating)==null?void 0:f.average,summary:s.summary,genres:s.genres}}async function t(){const n=await(await j.getShowById(e,["images"])).json();return a(n)}return k([x.SHOW,e],t)}var C="/assets/Star.c9ea94a1.svg";const $=e=>(I("data-v-021ffb78"),e=e(),B(),e),F={key:0,class:"rating","aria-label":"Show rating"},G=$(()=>r("img",{class:"rating__image",src:C,alt:"Rating"},null,-1)),M={class:"rating__text"},Q=$(()=>r("span",null,"rating",-1)),O=u({__name:"WatchShowRating",props:{rating:null},setup(e){const a=e;return(t,s)=>a.rating?(o(),c("div",F,[G,r("span",M,[W(m(a.rating)+" ",1),Q])])):g("",!0)}});var D=w(O,[["__scopeId","data-v-021ffb78"]]);const E={key:0,"aria-label":"Show genres",class:"show-details__genres"},K=u({__name:"WatchShowGenres",props:{genres:null},setup(e){const a=e;return(t,s)=>a.genres.length?(o(),c("ul",E,[(o(!0),c(S,null,L(a.genres,n=>(o(),c("li",{class:"show__genre",key:n},m(n),1))),128))])):g("",!0)}});var A=w(K,[["__scopeId","data-v-85d8db06"]]);const J=["innerHTML"],X=u({__name:"WatchShowSummary",props:{summary:null},setup(e){const a=e;return(t,s)=>(o(),c("p",{class:"show-details__summary",innerHTML:a.summary},null,8,J))}});const Y={class:"show-details"},Z={class:"show-details__name"},ee={class:"show-details__container"},ae=u({__name:"WatchShow",props:{id:null,name:null,headerImage:null,rating:null,summary:null,genres:null},setup(e){const a=e;return(t,s)=>(o(),c(S,null,[r("figure",v(t.$attrs,{class:"show__heading"}),[d(N,{class:"heading__image",src:a.headerImage,fallback:_(R),alt:`Show ${a.name}`},null,8,["src","fallback","alt"])],16),r("section",Y,[r("h1",Z,m(a.name),1),r("div",null,[a.rating?(o(),y(D,{key:0,rating:a.rating},null,8,["rating"])):g("",!0),r("div",ee,[d(X,{summary:a.summary},null,8,["summary"]),d(A,{genres:a.genres},null,8,["genres"])])])])],64))}});var se=w(ae,[["__scopeId","data-v-7a3e12f5"]]);const te={class:"watch-page"},re=u({__name:"WatchPage",props:{id:null},setup(e){const a=e,{isLoading:t,data:s}=q(a.id);return(n,l)=>(o(),c(S,null,[d(_(H),null,{default:z(()=>{var i;return[r("title",null,m((i=_(s))==null?void 0:i.name)+" - TVmaze",1)]}),_:1}),r("main",te,[_(t)?(o(),y(U,{key:0})):_(s)?(o(),y(se,v({key:1,class:"show-detail"},_(s)),null,16)):g("",!0)])],64))}});export{re as default};
